openapi: 3.1.0
info:
  title: dots api
  version: "1.0"
  summary: Dots Payout API
  description: Scalable and Flexible Payouts Infrastructure
  contact:
    name: Kartikye Mittal
    url: "https://dots.dev"
    email: info@dots.dev
  license:
    name: MIT
    url: "https://opensource.org/license/mit/"
servers:
  - url: "https://api.dots.dev/api"
    description: Production
tags:
  - name: accounts-payable
    description: Accounts Payable Routes
  - name: apps
    description: App Routes
  - name: checkout-sessions
    description: Checkout Session Routes
  - name: disputes
    description: Disputes Routes
  - name: flows
    description: Flow routes
  - name: organizations
    description: Organization Routes
  - name: payment-customers
    description: Payment Customer Routes
  - name: payment-intents
    description: Payment Intent Routes
  - name: payment-methods
    description: Payment Method Routes
  - name: payments
    description: Payment Routes
  - name: payout-batches
    description: Payout Batch Routes
  - name: payout-links
    description: Payout Link Routes
  - name: payout-requests
    description: Payout Request Routes
  - name: payouts
    description: Payout Routes
  - name: refunds
    description: Refund Routes
  - name: transactions
    description: Transaction Routes
  - name: transfer-batches
    description: Transfer Batch routes
  - name: transfers
    description: Transfer routes
  - name: users
    description: User routes
paths:
  /v2/users:
    get:
      summary: List all Users
      tags:
        - users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    description: Array of `user` objects.
                    items:
                      $ref: "#/components/schemas/user"
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
      operationId: get-users
      parameters:
        - schema:
            type: string
            enum:
              - verified
              - unverified
              - in_review
              - disabled
          in: query
          name: status
          description: "Filter users by status. Users that are `in_review` are users that have been flagged for fraud risk and is pending review."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all users connected to your application.
    post:
      summary: Create a User
      operationId: create-user
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
                description: The created `user` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                  description: The user's first name.
                last_name:
                  type: string
                  description: The user's last name.
                email:
                  type: string
                  format: email
                  description: The user's email address.
                country_code:
                  type: string
                  description: The user's phone number country code. e.g. "1"
                phone_number:
                  type: string
                  description: The user's phone number. e.g. "4157223331".
                username:
                  type: string
                  minLength: 1
                  maxLength: 50
                  description: Username to assign the user.
                date_of_birth:
                  type: string
                  format: date
                  description: User's date of birth.
                1099_adjustment_2024:
                  type: integer
                  minimum: 1
                  description: Income paid outside of the Dots platform in 2024.
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
              required:
                - first_name
                - last_name
                - email
                - country_code
                - phone_number
            examples:
              Example:
                value:
                  first_name: Bob
                  last_name: Loblaw
                  email: bob@bobloblaw.com
                  country_code: "1"
                  phone_number: "4154332334"
                  metadata:
                    internal_id: user_121344
        description: ""
      description: Create a user.
      tags:
        - users
    parameters: []
  "/v2/users/{user_id}":
    parameters:
      - schema:
          type: string
          format: uuid
        name: user_id
        in: path
        required: true
        description: Id of the user to fetch
    get:
      summary: Retrieve a User
      tags:
        - users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
                description: The `user` object.
      operationId: get-user
      description: Get a user by their id.
    delete:
      summary: Delete a User
      operationId: delete-user
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
                description: The `user` object.
      description: Delete a user.
      tags:
        - users
    patch:
      summary: Update a user
      description: Update mutable fields of a user object.
      operationId: update-user
      tags:
        - users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
                description: The `user` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                default_payout_method:
                  type: string
                  enum:
                    - paypal
                    - venmo
                    - cash_app
                    - ach
                    - intl_bank
                  description: Configures the user's default payout method. Must be a payout method already configured by the user.
                auto_payout_enabled:
                  type: boolean
                  description: Enables auto payout for the user whenever a default payout method is defined
                date_of_birth:
                  type: string
                  format: date
                  description: User's date of birth.
                1099_adjustment_2024:
                  type: integer
                  minimum: 1
                  description: Income paid outside of the Dots platform in 2024.
                metadata:
                  description: Arbitrary metadata
  "/v2/users/{user_id}/compliance":
    parameters:
      - schema:
          type: string
        name: user_id
        in: path
        required: true
        description: Id of the user to fetch
    put:
      summary: Submit Compliance Information
      operationId: submit-compliance
      responses:
        "200":
          description: OK
      description: Add Compliance information to a user.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                w9:
                  type: object
                  description: W-9 equivalent for users based in the United States.
                  properties:
                    entity_type:
                      type: string
                      enum:
                        - individual
                        - business
                      description: "Type of entity filling out the W-9, `business` or `individual`."
                    business_name:
                      type: string
                      description: Legal bussiness name. Required if `entity_type` is `business`.
                    first_name:
                      type: string
                    last_name:
                      type: string
                    date_of_birth:
                      type: string
                      format: date
                      description: Required if `entity_type` is `individual`.
                    tin:
                      type: string
                      minLength: 9
                      maxLength: 9
                      description: SSN if `entity_type` is `individual`. EIN if `entity_type` is `business`.
                    address:
                      type: object
                      required:
                        - line_1
                        - city
                        - state
                        - country
                        - postcode
                      description: Address of the user or their business.
                      properties:
                        line_1:
                          type: string
                          description: Address line 1.
                        line_2:
                          type: string
                          description: Address Line 2
                        city:
                          type: string
                          description: City.
                        state:
                          type: string
                          description: State.
                        country:
                          type: string
                          description: Country.
                        postcode:
                          type: string
                          description: Postal code or Zip code.
                  required:
                    - entity_type
                    - date_of_birth
                    - tin
                    - address
                w8ben:
                  type: object
                  description: W8-BEN form for foreign payees.
                  properties:
                    name:
                      type: string
                      description: Full name of the person.
                    citizenship_country:
                      type: string
                      description: The two-letter ISO country code associated with the beneficial owner's citizenship.
                    date_of_birth:
                      type: string
                      format: date
                      description: Date of birth of the user.
                    foreign_tax_id:
                      type: string
                      description: The tax identification number associated with the beneficial owner's country of residence. This is required for non-exempt countries.
                    tax_treaty_country:
                      type: string
                      description: The two-letter ISO country code of the country for tax treaty purposes.
                    tax_treaty_citation:
                      type: string
                      description: The article and paragraph of the citation claimed for tax treaty purposes.
                    tax_treaty_rate:
                      type: number
                      format: decimal
                      description: The withholding rate claimed for tax treaty purposes. For example, a 15% rate would be represented as 0.15.
                    tax_treaty_income_type:
                      type: string
                      enum:
                        - interest1
                        - dividend6
                        - dividend7
                        - pension15
                        - socialSecurity
                        - equipment10
                        - knowhow10
                        - patent10
                        - film11
                        - copyright12
                      description: The type of income for tax treaty purposes. Valid values are - interest1 (Interest Paid by U.S. Obligors) - dividend6 (Dividends Paid by U.S. Corporations) - dividend7 (Dividends Qualifying for Direct Dividend Rate) - pension15 (Pensions and Annuities) - socialSecurity (Social Security) - equipment10 (Industrial Equipment) - knowhow10 (Know-How/Other Industrial Royalties) - patent10 (Patents) - film11 (Film & TV) - copyright12 (Copyrights)
                    tax_treaty_explanation:
                      type: string
                      description: An optional explanation for the tax treaty claimed.
                    address:
                      type: object
                      required:
                        - line_1
                        - city
                        - country
                        - postcode
                      description: Address of the user or their business.
                      properties:
                        line_1:
                          type: string
                          description: Address line 1.
                        line_2:
                          type: string
                          description: Address line 2.
                        city:
                          type: string
                          description: City.
                        state:
                          type: string
                          description: State.
                        country:
                          type: string
                          description: Country.
                        postcode:
                          type: string
                          description: Postal code or Zip Code.
                    signature:
                      type: object
                      required:
                        - consent
                        - name
                        - email
                      description: Signature of the user.
                      properties:
                        consent:
                          type: boolean
                          description: The consent of the beneficial owner to the disclosure of their information to the IRS.
                        name:
                          type: string
                          description: The name of the person signing the form.
                        email:
                          type: string
                          description: The email address of the person signing the form.
                  required:
                    - name
                    - citizenship_country
                    - date_of_birth
                    - address
                    - signature
                  if:
                    properties:
                      citizenship_country:
                        not:
                          enum: ['AU', 'BM', 'VG', 'KY', 'JP']
                  then:
                    required:
                      - tax_treaty_country
                      - tax_treaty_citation
                      - tax_treaty_rate
                      - tax_treaty_income_type
                      - tax_treaty_explanation
      tags:
        - users
  "/v2/users/{user_id}/send-verification-token":
    parameters:
      - schema:
          type: string
        name: user_id
        in: path
        required: true
        description: Id of the user to fetch
    post:
      summary: Send a Verification Token
      operationId: send-verification-token
      responses:
        "202":
          description: Accepted
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                use_voice:
                  type: boolean
                  description: Defaults to `false` which sends token via SMS. Set `true` to receive via call instead.
                  default: false
      description: Send a user a verification token.
      tags:
        - users
  "/v2/users/{user_id}/verify":
    parameters:
      - schema:
          type: string
          format: uuid
        name: user_id
        in: path
        required: true
        description: Id of the user to fetch
    post:
      summary: Verify a User
      operationId: verify
      responses:
        "200":
          description: OK
        "400":
          description: Incorrect token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  minLength: 6
                  description: The token sent to the user.
              required:
                - token
      description: Verify a user with a token.
      tags:
        - users
  "/v2/users/{user_id}/payout-methods":
    parameters:
      - schema:
          type: string
          format: uuid
        name: user_id
        in: path
        required: true
        description: Id of the user to fetch
    get:
      summary: List Payout Methods
      tags:
        - users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: Array of payout methods registered to the user.
                items:
                  $ref: "#/components/schemas/payment-method"
      operationId: get-payout-methods
      description: Get a user's connected payout methods.
    put:
      summary: Add a Payout Method
      operationId: add-payout-method
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  platform:
                    enum:
                      - ach
                      - paypal
                      - venmo
                      - cash_app
                      - airtm
                      - payoneer
                    type: string
                    description: The type of account to add.
                  handle:
                    type: string
                    description: Handle for Venmo accounts.
                  email:
                    type: string
                    description: Email for PayPal and Payoneer accounts.
                  phone_number:
                    type: string
                    description: Phone number for Venmo accounts.
                  cash_tag:
                    type: string
                    description: Cash tag for Cash App accounts.
                  account_number:
                    type: string
                    description: ACH account number.
                  routing_number:
                    type: string
                    description: ACH routing number.
                  account_type:
                    type: string
                    enum: [checking, savings]
                    description: ACH account type, either "checking" or "savings".
                  rtp_enabled:
                    type: boolean
                    description: Indicates if RTP is enabled for the payment method (applies to ach only).
                  meta:
                    description: Optional metadata stored with the payout method. Can be any valid JSON value (object, string, number, boolean, array, or null).
                required:
                  - platform
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                platform:
                  type: string
                  enum:
                    - paypal
                    - venmo
                    - cash_app
                    - ach
                  description: Payout platform to add.
                routing_number:
                  type: string
                  description: Bank account or Cash App routing number. Required if `platform` = `ach` or `cash_app`.
                account_number:
                  type: string
                  description: Bank account or Cash App account number. Required if `platform` = `ach` or `cash_app`.
                account_type:
                  type: string
                  enum:
                    - checking
                    - savings
                  description: Bank account type. Required if `platform` = `ach`.
                email:
                  type: string
                  description: PayPal email address. Required if `platform` = `paypal`.
                phone_number:
                  type: string
                  description: Venmo phone number. One of `phone_number` or `handle` is required if `platform` = `venmo`.
                handle:
                  type: string
                  description: Venmo handle. One of `phone_number` or `handle` is required if `platform` = `venmo`.
                cash_tag:
                  type: string
                  description: Cash App Cash Tag. Required if `platform` = `cash_app`.
                is_default:
                  type: [boolean, "null"]
                  description: When true, the newly added payment method will
                    be set as the user's default payout method.
                auto_payout_enabled:
                  type: [boolean, "null"]
                  description: When specified, enables or disables auto payout
                    for this user.
                metadata:
                  description: Optional metadata to store with the payout method. Can be any valid JSON value (object, string, number, boolean, array, or null).
              required:
                - platform
            examples:
              Bank Account:
                value:
                  platform: ach
                  routing_number: "123456789"
                  account_number: "123456789"
                  account_type: checking
              PayPal:
                value:
                  platform: paypal
                  email: bob.loblaw@gmail.com
              Venmo:
                value:
                  platform: venmo
                  phone_number: "4158934432"
              Cash App:
                value:
                  platform: cash_app
                  routing_number: "123456789"
                  account_number: "123456789"
                  cash_tag: $cash_tag
              Bank Account with Metadata:
                value:
                  platform: ach
                  routing_number: "123456789"
                  account_number: "123456789"
                  account_type: checking
                  metadata:
                    internal_id: "customer_123"
                    notes: "Primary business account"
                    priority: 1
      description: "Add a payout method to the user. Payout method can be one of `paypal`, `venmo`, `ach`, or `cash_app`. Each method has different required parameters."
      tags:
        - users
  /v2/transfers:
    get:
      summary: List all Transfers
      tags:
        - transfers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `transfers`."
                  data:
                    type: array
                    description: Array of `transfers`.
                    items:
                      $ref: "#/components/schemas/transfer"
      operationId: get-transfers
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: user_id
          description: Include only results with this user ID attached.
        - schema:
            type: string
          in: query
          name: type
          description: Filter transfers by type.
        - schema:
            type: string
          in: query
          name: status
          description: Filter transfers by status.
        - schema:
            type: string
            format: date-time
          in: query
          name: start_date
          description: Filter transfers by start date.
        - schema:
            type: string
            format: date-time
          in: query
          name: end_date
          description: Filter transfers by end date.
      description: List all transfers.
    post:
      summary: Create a Transfer
      operationId: create-transfer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount in cents to transfer. Negative amount transfers money from the `app` to the `user`.
                user_id:
                  type: string
                  format: uuid
                  description: The user's id.
                tax_exempt:
                  type:
                    - boolean
                    - "null"
                  description: Transfers marked as `tax_exempt` will not be counted towards the 1099 threshold.
                idempotency_key:
                  type:
                    - string
                    - "null"
                  format: uuid
                  description: UUID that will be used to idempotently handle requests. Transfers with existing idempotency keys will be rejected.
                metadata:
                  type:
                    - string
                    - object
                    - "null"
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
              required:
                - amount
                - user_id
            examples:
              Send Funds to User:
                value:
                  amount: -1000
                  user_id: a169451c-8525-4352-b8ca-070dd449a1a5
              Debit Funds from User:
                value:
                  amount: 1000
                  user_id: a169451c-8525-4352-b8ca-070dd449a1a5
        description: ""
      description: Create a transfer.
      tags:
        - transfers
    parameters: []
  "/v2/transfers/{transfer_id}":
    parameters:
      - schema:
          type: string
          format: uuid
        name: transfer_id
        in: path
        required: true
        description: Id of the transfer to fetch
    get:
      summary: Get a Transfer
      tags:
        - transfers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      operationId: get-transfer
      description: Get a transfer by its id.
  /v2/flows:
    get:
      summary: List all Flows
      tags:
        - flows
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `flows`."
                  data:
                    type: array
                    description: Array of `flow` objects.
                    items:
                      $ref: "#/components/schemas/flow"
      operationId: get-flows
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all Flows.
    post:
      summary: Create a Flow
      operationId: create-flow
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/flow"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                steps:
                  type: array
                  uniqueItems: true
                  description: 'A list of steps. Can either be a string or an object with additional properties. Example: A `redirect` step looks like {"name": "redirect", "redirect_url": "https://example.com"}'
                  items:
                    oneOf:
                      - type: string
                        title: Step Name
                        enum:
                          - compliance
                          - id-verification
                          - manage-payouts
                          - manage-payments
                          - payout
                          - background-check
                          - redirect
                        description: The `step` name.
                      - type: object
                        title: Step With Options
                        properties:
                          name:
                            type: string
                            enum:
                              - compliance
                              - id-verification
                              - manage-payouts
                              - manage-payments
                              - payout
                              - background-check
                              - redirect
                            description: The `step` name.
                          auto_payout_enabled:
                            type: boolean
                            description: Enable or disable setting auto payout on the `payout` or `manage-payout` step. Defaults to `true`.
                            default: true
                          redirect_url:
                            type: string
                            pattern: 'https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)'
                            description: URL to redirect for the `redirect` step.
                            format: uri
                          hide_continue_button:
                            type: boolean
                            description: Hide the continue button on the flow UI. Defaults to `false`.
                            default: false
                        required:
                          - name
                user_id:
                  type: string
                  format: uuid
                  description: The user's id. If the user's ID is provided, the flow will be created in the authenticated state with a 15 minute expiration time unless the `require_auth` option is set to `true`.
                hide_go_to_dashboard_on_complete:
                  type: boolean
                  description: Hide the "Go to dashboard" button on the flow UI. Defaults to `false`.
                  default: false
                require_auth:
                  type: boolean
                  description: Require the user to be authenticated to complete the flow. Defaults to `false`.
                  default: false
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
              required:
                - steps
      description: Create a new Flow.
      tags:
        - flows
  "/v2/flows/{flow_id}":
    parameters:
      - schema:
          type: string
          format: uuid
        name: flow_id
        in: path
        required: true
        description: Id of the flow to fetch
    get:
      summary: Retrieve a Flow
      tags:
        - flows
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/flow"
                description: The `flow` object.
      operationId: get-flow
      description: Get a Flow by its id.
  /v2/payout-links:
    get:
      summary: List all Payout Links
      tags:
        - payout-links
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `payout-links`."
                  data:
                    type: array
                    description: Array of `payout-links`.
                    items:
                      $ref: "#/components/schemas/payout-link"
      operationId: get-payout-links
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all created Payout Links.
    post:
      summary: Create a Payout Link
      operationId: create-payout-link
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-link"
                description: The `payout-link` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                user_id:
                  type: string
                  format: uuid
                  description: The user's id.
                payee:
                  type: object
                  description: The payee. This is optional.
                  properties:
                    first_name:
                      type: string
                      description: First name of the payee.
                    last_name:
                      type: string
                      description: Last name of the payee.
                    country_code:
                      type: string
                      description: Country code of the payee's phone number e.g. "1" for USA.
                    phone_number:
                      type: string
                      description: Rest of the payee's phone number.
                    email:
                      type: string
                      description: Payee's email address.
                amount:
                  type: integer
                  description: Amount to be paid in cents.
                delivery:
                  type: object
                  properties:
                    message:
                      type: string
                      description: Message to send in the sms message that is sent to the payee.
                    method:
                      type: string
                      enum:
                        - sms
                        - link
                        - email
                        - all
                      description: "Delivery method. `sms` requires `payee.country_code` and `payee.phone_number`, `email` required `payee.email`. `all` will deliver to all the methods supplied in the payee object (e.g., `all` with empty `payee` has the same effect as `link`, and `all` with `payee.email` has the same effect as `email`)."
                force_collect_compliance_information:
                  type: boolean
                  default: false
                  description: Force the collection of 1099 or W-8 information. Defaults to `false`.
                tax_exempt:
                  type: boolean
                  description: Payout links marked as `tax_exempt` will not be counted towards the 1099 threshold.
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
                memo:
                  type: string
                  description: Add a memo to the top of the Payout Link
                idempotency_key:
                  type:
                    - string
                    - "null"
                  format: uuid
                  description: "Unique UUID key that prevents duplicate requests from being processed. If a payout link with the idempotency key exists, a new link will not be created and the existing link will be returned instead."
                payout_fee_party:
                  type:
                    - string
                    - "null"
                  format: uuid
                  enum:
                    - user
                    - platform
                  description: Overrides the setting for which party will pay fees on this payout. This takes precedence over the default for your application.
                additional_steps:
                  type: array
                  description: Array of steps in the flow.
                  items:
                    type: string
                    enum:
                      - compliance
                      - id-verification
                      - background-check
                      - manage-payments
                      - manage-payouts
                      - payout
                      - redirect
                accounting_data:
                  type: object
                  properties:
                    quickbooks_account_id:
                      type: integer
                      description: Source/destination account ID to use
                        when syncing the transaction to Quickbooks.
                    quickbooks_class_id:
                      type: integer
                      description: Class ID to use for classification
                        when syncing the transaction to Quickbooks.
              required:
                - amount
      description: Create a Payout Link.
      tags:
        - payout-links
  "/v2/payout-links/{payout_link_id}":
    parameters:
      - schema:
          type: string
        name: payout_link_id
        in: path
        required: true
        description: Id of the payout link
    get:
      summary: Retrieve a Payout Link
      tags:
        - payout-links
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-link"
                description: The `payout-link` object.
      operationId: get-payout-link
      description: Get a payout link by its id.
    delete:
      summary: Delete a Payout Link
      operationId: delete-payout-link
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-link"
                description: The `payout-link` object.
      description: Cancel a payout link
      tags:
        - payout-links
  "/v2/payout-links/{payout_link_id}/redeliver":
    parameters:
      - schema:
          type: string
        name: payout_link_id
        in: path
        required: true
        description: Id of the payout link
    post:
      summary: Redeliver Payout Link
      operationId: redeliver-payout-link
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-link"
                description: The `payout-link` object.
      description: Redeliver a payout link. Payout links will be delivered
        up to 5 times.
      tags:
        - payout-links
  /v2/payouts:
    post:
      summary: Create a Payout
      operationId: create-payout
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/payout-create-request"
        description: ""
      description: Create a payout for an existing user that has a payout method saved to their account.
      tags:
        - payouts
  /v2/payout-batches:
    post:
      summary: Create a Payout Batch
      operationId: create-payout-batch
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-batch-response"
                description: The created payout batch.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: Request to create a batch of payouts
              properties:
                items:
                  type: array
                  description: List of individual payouts to create in the batch.
                  minItems: 1
                  maxItems: 5000
                  items:
                    $ref: "#/components/schemas/payout-batch-request-item"
                idempotency_key:
                  type: string
                  format: uuid
                  description: UUID that will be used to idempotently handle the batch request. Batches with existing idempotency keys will be rejected.
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to the batch. This can be useful for storing additional information about the batch in a structured format.
              required:
                - items
            examples:
              Example:
                value:
                  items:
                    - user_id: "a169451c-8525-4352-b8ca-070dd449a1a5"
                      amount: 1000
                      platform: "paypal"
                      idempotency_key: "b2c3d4e5-f6g7-h8i9-j0k1-l2m3n4o5p6q7"
                      fund: true
                      tax_exempt: false
                      metadata:
                        invoice_id: "INV-123"
                    - user_id: "b269451c-9625-5452-c9db-171ee559b2b6"
                      amount: 2500
                      platform: "ach"
                      account_id: "c369451c-a725-6552-d0ec-272ff669c3c7"
                      idempotency_key: "c3d4e5f6-g7h8-i9j0-k1l2-m3n4o5p6q7r8"
                      fund: true
                      tax_exempt: false
                  metadata:
                    batch_type: "weekly_payouts"
                    week: "2024-01"
        required: true
      description: Create a batch of payouts to multiple users. Each payout in the batch is processed independently with its own idempotency key. The batch itself can also have an idempotency key to prevent duplicate batch submissions. All payouts in a batch must have `fund=true`.
      tags:
        - payout-batches
    get:
      summary: List all Payout Batches
      tags:
        - payout-batches
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more payout batches."
                  data:
                    type: array
                    description: Array of payout batch objects.
                    items:
                      $ref: "#/components/schemas/payout-batch-response"
      operationId: get-payout-batches
      parameters:
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all payout batches created by your application.
  "/v2/payout-batches/{payout_batch_id}":
    parameters:
      - schema:
          type: string
          format: uuid
        name: payout_batch_id
        in: path
        required: true
        description: Id of the payout batch to fetch
    get:
      summary: Retrieve a Payout Batch
      tags:
        - payout-batches
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-batch-response"
      operationId: get-payout-batch
      description: Get a payout batch by its id including status and optional metadata
  "/v2/payout-batches/{payout_batch_id}/results":
    parameters:
      - schema:
          type: string
          format: uuid
        name: payout_batch_id
        in: path
        required: true
        description: Id of the payout batch to fetch
    get:
      summary: Retrieve a Payout Batch with detailed results
      tags:
        - payout-batches
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/payout-batch-response"
                  - type: object
                    properties:
                      items:
                        type: array
                        description: Results for each item in the batch.
                        items:
                          $ref: "#/components/schemas/payout-batch-results-item"
                    required:
                      - items
                description: The payout batch with detailed results for each item.
      operationId: get-payout-batch
      parameters:
        - schema:
            type: boolean
            default: false
          in: query
          name: include_request
          description: "Include the original request data for each item in the response. This can be useful for debugging or reconciliation."
      description: Get a payout batch by its id. Returns detailed results for each item in the batch, including transfer information for successful payouts and error messages for failed ones.
  /v2/payments:
    post:
      summary: Create a Payment
      operationId: create-payment
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                  format: uuid
                customer_id:
                  type: string
                  format: uuid
                amount:
                  type: integer
                  exclusiveMinimum: 0
                platform:
                  type: string
                  enum:
                    - ach
                ach_info:
                  type: object
                  properties:
                    account_number:
                      type: string
                      pattern: "[0-9]{7,17}"
                    routing_number:
                      type: string
                      pattern: "[0-9]{9}"
                    account_type:
                      type: string
                      enum:
                        - checking
                        - savings
                  description: |
                    Specifies the bank account to draw the payment from. This can be used as an alternative to a stored account ID.
                account_id:
                  type:
                    - string
                    - 'null'
                  description: The user's ACH account ID.
                metadata: {}
              required:
                - amount
                - platform
              oneOf:
                - required:
                    - user_id
                - required:
                    - customer_id
              if:
                properties:
                  platform:
                    const: ach
              then:
                oneOf:
                  - required:
                      - account_id
                  - required:
                      - ach_info
      description: "Creates a transaction from a user or a payment customer to the app. User the `/users/{user_id}/payout-methods` route to get a user's stored payment methods."
      tags:
        - payments
  /v2/payouts/send-payout:
    parameters: []
    post:
      summary: Send a Payout
      operationId: send-payout
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-link"
                description: The `payout-link` object.
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: false
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount in cents to pay the user.
                  exclusiveMinimum: 0
                user_id:
                  type: string
                  format: uuid
                  description: The user's id. `user_id` or `payee` is required.
                payee:
                  type: object
                  description: The payee's phone number. `user_id` or `payee` is required.
                  properties:
                    country_code:
                      type: string
                      description: Country code of the payee's phone number e.g. "1" for USA.
                    phone_number:
                      type: string
                      description: Rest of the payee's phone number.
                  required:
                    - country_code
                    - phone_number
                delivery:
                  type: object
                  properties:
                    message:
                      type: string
                      description: Message to send with the payout through sms.
                force_collect_compliance_information:
                  type: boolean
                  default: false
                  description: Collect 1099 or w8-ben information.
                additional_steps:
                  type: array
                  description: Array of steps in the flow.
                  items:
                    type: string
                    enum:
                      - compliance
                      - id-verification
                      - background-check
                      - manage-payments
                      - manage-payouts
                      - payout
                      - redirect
                tax_exempt:
                  type: boolean
                  description: Payouts marked as `tax_exempt` will not be counted towards the 1099 threshold.
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
                memo:
                  type: string
                  description: Add a memo to the top of the Payout Link
                idempotency_key:
                  type:
                    - string
                    - "null"
                  format: uuid
                  description: "Unique UUID key that prevents duplicate requests from being processed. If a payout link with the idempotency key exists, a new link will not be created and the existing link will be returned instead."
                payout_fee_party:
                  type:
                    - string
                    - "null"
                  format: uuid
                  enum:
                    - user
                    - platform
                  description: Overrides the setting for which party will pay fees on this payout. This takes precedence over the default for your application.
                accounting_data:
                  type: object
                  properties:
                    quickbooks_account_id:
                      type: integer
                      description: Source/destination account ID to use
                        when syncing the transaction to Quickbooks.
                    quickbooks_class_id:
                      type: integer
                      description: Class ID to use for classification
                        when syncing the transaction to Quickbooks.
              required:
                - amount
      description: "Send a payout to a person when you know their phone number or user id. If the user has a Dots acconut, the funds will delivered according to their saved prefernces. Otherwise, they will be sent a Payout Link to onboard and recieve funds."
      tags:
        - payouts
  /v2/payout-requests:
    parameters: []
    post:
      summary: Create a Payout Request
      operationId: create-payouts-request
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-request"
                description: The `payout-request` id.
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: false
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount in cents to pay the user.
                  exclusiveMinimum: 0
                user_id:
                  type: string
                  format: uuid
                  description: The user's id. `user_id` or `payee` is required.
                payee:
                  type: object
                  description: The payee's phone number. `user_id` or `payee` is required.
                  properties:
                    country_code:
                      type: string
                      description: Country code of the payee's phone number e.g. "1" for USA.
                    phone_number:
                      type: string
                      description: Rest of the payee's phone number.
                  required:
                    - country_code
                    - phone_number
                metadata:
                  type:
                    - string
                    - object
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
                memo:
                  type: string
                  description: Add a memo to payout request
              required:
                - amount
      description: "Submit a payout request from a person when you know their phone number or user id. Once the payout request is approved, they will be sent a Payout Link to onboard and recieve funds."
      tags:
        - payout-requests
    get:
      summary: List all Payout Requests
      tags:
        - payout-requests
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `payout-requests`."
                  data:
                    type: array
                    description: Array of `payout-request`.
                    items:
                      $ref: "#/components/schemas/payout-request"
      operationId: get-payout-requests
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all payout requests.
  "/v2/payout-requests/{payout_request_id}":
    parameters:
      - schema:
          type: string
        name: payout_request_id
        in: path
        required: true
        description: Id of the payout request
    get:
      summary: Retrieve a Payout Request
      tags:
        - payout-requests
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payout-request"
                description: The `payout-request` id.
      operationId: get-payout-request
      description: Get a payout request by its id.
  /v2/transactions:
    get:
      summary: List all Transactions
      tags:
        - transactions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `transactions`."
                  data:
                    type: array
                    description: Array of `transactions`.
                    items:
                      $ref: "#/components/schemas/transaction"
      operationId: get-transactions
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
        - schema:
            type: boolean
          in: query
          name: include_transfer
          description: "Include transfers in the response."
      description: List all transactions.
  "/v2/transactions/{transaction_id}":
    parameters:
      - schema:
          type: string
        name: transaction_id
        in: path
        required: true
        description: Id of the transaction
    get:
      summary: Retrieve a Transaction
      tags:
        - transactions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transaction"
                description: The `transaction` object.
      operationId: get-transaction
      description: Get a transaction by its id.
  /v2/payment-intents:
    get:
      summary: List all Payment Intents
      tags:
        - payment-intents
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: Array of `payment-intents`.
                items:
                  $ref: "#/components/schemas/payment-intent"
      operationId: get-payment-intents
      description: Get all payment intents
    post:
      summary: Create a Payment Intent
      operationId: create-payment-intent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-intent"
                description: The `payment-intent` object.
      description: Create a Payment Intent
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  exclusiveMinimum: 0
                  description: Amount in cents
                currency:
                  type: string
                  enum:
                    - usd
                  description: Currency of the payment. Currently only `usd` is supported.
                confirm:
                  type: boolean
                  default: false
                  description: Set to `true` to attempt to confirm this payment intent immediately. Defaults to `false`.
                user_id:
                  type: string
                  format: uuid
                  description: ID of a Dots `user` making this payment.
                customer_id:
                  type: string
                  format: uuid
                  description: ID of a Dots `payment_customer` making this payment.
                description:
                  type: string
                  description: An arbitrary string attached to the object. Often useful for displaying to users.
                payment_method_id:
                  type: string
                  format: uuid
                  description: ID of the payment method to attach to this payment intent.
                payment_method_types:
                  type: array
                  description: Currently only `card` is supported.
                  items:
                    type: string
                    enum:
                      - card
                setup_future_usage:
                  type: string
                  enum:
                    - on_session
                metadata:
                  type: boolean
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
                transfer_data:
                  type: object
                  properties:
                    destination_user_id:
                      type: string
                      format: uuid
                      description: The destination user to send the funds to. This is `amount` - transactions fees - `application_fee`.
                application_fee_amount:
                  type: integer
                  minimum: 0
                  description: Amount in cents to transfer to the application's wallet as a platform fee.
              required:
                - amount
                - currency
      tags:
        - payment-intents
  "/v2/payment-intents/{payment_intent_id}":
    parameters:
      - schema:
          type: string
        name: payment_intent_id
        in: path
        required: true
        description: Payment Intent ID
    get:
      summary: Retrieve a Payment Intent
      tags:
        - payment-intents
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-intent"
                description: The `payment-intent` object.
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    enum:
                      - PaymentIntent not found
      operationId: get-payment-intent
      description: Retrieve a payment intent by its ID.
      parameters: []
  "/v2/payment-intents/{payment_intent_id}/confirm":
    parameters:
      - schema:
          type: string
        name: payment_intent_id
        in: path
        required: true
        description: The ID if the Payment Intent to confirm.
    post:
      summary: Confirm a Payment Intent
      tags:
        - payment-intents
      operationId: confirm-payment-intent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-intent"
      description: Confirm a payment intent that has not been confirmed yet.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_method_id:
                  type: string
                  description: ID of the payment method to confirm the intent with.
              required:
                - payment_method_id
  /v2/transfer-batches:
    get:
      summary: List all Transfer Batches
      tags:
        - transfer-batches
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        status:
                          type: string
                          enum:
                            - completed
                            - pending
                        metadata:
                          type: object
                        items:
                          type: array
                          items:
                            $ref: "#/components/schemas/transfer-batch-item"
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
      operationId: get-transfer-batches
      description: Get a transfer batch
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
    post:
      summary: Create a Transfer Batch
      operationId: create-transfer-batch
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum:
                      - pending
                      - completed
                  metadata:
                    type: object
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/transfer-batch-item"
      description: Create a transfer batch
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      amount:
                        type: integer
                      user_id:
                        type: string
                        format: uuid
                      tax_exempt:
                        type: boolean
                      allow_debit:
                        type: boolean
                      idempotency_key:
                        type: string
                        format: uuid
                      metadata:
                        type: object
                idempotency_key:
                  type: string
                  format: uuid
                metadata:
                  type: object
          application/xml:
            schema:
              type: object
              properties: {}
      tags:
        - transfer-batches
    parameters: []
  "/v2/transfer-batches/{transfer_batch_id}":
    parameters:
      - schema:
          type: string
        name: transfer_batch_id
        in: path
        required: true
        description: Id of the transfer batch to fetch
    get:
      summary: Retrieve a Transfer Batch
      tags:
        - transfer-batches
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum:
                      - completed
                      - pending
                  metadata:
                    type: object
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/transfer-batch-item"
      operationId: get-transfer-batch
      description: Get a transfer batch by id
  /v2/payment-customers:
    get:
      summary: List all Payment Customers
      tags:
        - payment-customers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/payment-customer"
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
      operationId: get-payment-customers
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all payment customers
    post:
      summary: Create a Payment Customer
      operationId: create-payment-customers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  user_id:
                    type: string
                    format: uuid
                  email:
                    type: string
                    format: email
                  country_code:
                    type: string
                  phone_number:
                    type: string
      description: Create a Payment Customer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/payment-customer"
              oneOf:
                - required:
                    - first_name
                    - last_name
                - required:
                    - business_name
      tags:
        - payment-customers
  "/v2/payment-customers/{payment_customer_id}":
    parameters:
      - schema:
          type: string
        name: payment_customer_id
        in: path
        required: true
        description: The ID of the payment customer
    get:
      summary: Retrieve a Payment Customer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-customer"
      operationId: get-payment-customer
      description: Get a payment customer by ID.
      tags:
        - payment-customers
  /v2/checkout-sessions:
    get:
      summary: List all Checkout Sessions
      tags:
        - checkout-sessions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/checkout-session"
      operationId: get-checkout-sessions
      description: List all checkout sessions
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
    post:
      summary: Create a Checkout Session
      operationId: create-checkout-session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/checkout-session"
      description: Create a checkout session
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                line_items:
                  type: array
                  uniqueItems: true
                  items:
                    type: object
                    additionalProperties: false
                    properties:
                      price_data:
                        type: object
                        additionalProperties: false
                        required:
                          - currency
                          - amount
                          - product_data
                        properties:
                          currency:
                            type: string
                            enum:
                              - usd
                          amount:
                            type: integer
                            description: amount in cents
                          product_data:
                            type: object
                            additionalProperties: false
                            required:
                              - name
                            properties:
                              name:
                                type: string
                              description:
                                type: string
                              images:
                                type: array
                                items:
                                  type: string
                                  format: uri
                              metadata:
                                type: object
                      quantity:
                        type: integer
                    required:
                      - price_data
                      - quantity
                customer_email:
                  type: string
                  format: email
                client_reference_id:
                  type: string
                success_url:
                  type: string
                  format: uri
                cancel_url:
                  type: string
                  format: uri
                mode:
                  type: string
                  enum:
                    - payment
                user_id:
                  type: string
                  format: uuid
                  description: Supply a Dots user ID in place of a customer ID
                customer_id:
                  type: string
                  format: uuid
                expires_in:
                  type: integer
                  minimum: 0
                  maximum: 10800
                  default: 10800
                metadata:
                  type: object
              required:
                - success_url
                - line_items
                - mode
      tags:
        - checkout-sessions
  "/v2/checkout-sessions/{checkout_session_id}":
    parameters:
      - schema:
          type: string
        name: checkout_session_id
        in: path
        required: true
        description: ID of the checkout session to retrieve
    get:
      summary: Retrieve a Checkout Session
      tags:
        - checkout-sessions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/checkout-session"
      operationId: get-checkout-session
      description: Retrieve a checkout session by an ID
  /v2/accounts-payable/vendors:
    get:
      summary: List all vendors
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/vendor"
      operationId: get-vendors
      description: List all vendors
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
    post:
      summary: Create a vendor
      description: Create a vendor in your app for accounts payable
      operationId: create-vendor
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                contact_email:
                  type: string
                  format: email
                external_id:
                  type: string
                address:
                  type: object
                  properties:
                    country:
                      type: string
                      enum: ['US']  # Only allow US for now
                    city:
                      type: string
                    state:
                      type: string
                      enum: ['AL', 'AK', 'AS', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FM', 'FL', 'GA', 'GU', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MH', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'MP', 'OH', 'OK', 'OR', 'PW', 'PA', 'PR', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VI', 'VA', 'WA', 'WV', 'WI', 'WY']
                    line_1:
                      type: string
                    line_2:
                      type: string
                    postcode:
                      type: string
                  required:
                    - line_1
                    - country
                    - state
                    - city
                    - postcode
              required:
                - name
                - address
              
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/vendor"
  "/v2/accounts-payable/vendors/{vendor_id}":
    parameters:
      - schema:
          type: string
        name: vendor_id
        in: path
        required: true
        description: The ID of the Vendor
    get:
      summary: Get vendor details
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/vendor"
      operationId: get-vendor
      description: Get details of vendor
    delete:
      summary: Delete a vendor
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    type: boolean
                    description: "`true` if the vendor was deleted."
                  id:
                    type: string
                    description: ID of the vendor that was deleted.
                  object:
                    type: string
                    description: Type of the object that was deleted.
      operationId: delete-vendor
      description: Delete a vendor
  "/v2/accounts-payable/vendors/{vendor_id}/payment-methods":
    parameters:
      - schema:
          type: string
        name: vendor_id
        in: path
        required: true
        description: The ID of the Vendor
    get:
      summary: List all payment methods for a vendor
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/vendor"
      operationId: get-vendor-payment-methods
      description: List all payment methods for a vendor
    post:
      summary: Create a payment method for a vendor
      description: Create a payment method for a vendor to pay to
      operationId: create-vendor-payment-method
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                ach_account_number:
                  type: string
                ach_routing_number:
                  type: string
                ach_account_type:
                  type: string
                  enum:
                    - checking
                    - savings
              required:
                - name
                - ach_account_number
                - ach_routing_number
                - ach_account_type
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/vendor-payment-method"
  "/v2/accounts-payable/vendors/{vendor_id}/payment-methods/{payment_method_id}":
    parameters:
      - schema:
          type: string
        name: vendor_id
        in: path
        required: true
        description: The ID of the Vendor
      - schema:
          type: string
        name: payment_method_id
        in: path
        required: true
        description: The ID of the Vendor's Payment Method
    get:
      summary: Get vendor payment method details
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/vendor-payment-method"
      operationId: get-vendor-payment-method
      description: Get details of vendor payment method
    delete:
      summary: Delete a vendor payment method
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    type: boolean
                    description: "`true` if the vendor payment method was deleted."
                  id:
                    type: string
                    description: ID of the vendor payment method that was deleted.
                  object:
                    type: string
                    description: Type of the object that was deleted.
      operationId: delete-vendor-payment-method
      description: Delete a vendor payment method
  /v2/accounts-payable/payables:
    get:
      summary: List all payables
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more objects."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/payable"
      operationId: get-payables
      description: List all payables
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
    post:
      summary: Create a payable
      description: Create a payable in your app for accounts payable. The minimum required details to create a payable is the payable number. Remaining fields can be added later by updating the payable before submission.
      operationId: create-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                number:
                  type: string
                description:
                  type: string
                external_id:
                  type: string
                ap_vendor_id:
                  type: string
                  format: uuid
                ap_payment_method_id:
                  type: string
                  format: uuid
                amount:
                  type: number
                  minimum: 1
                  description: Total payable amount in cents.
                funding_source:
                  type: string
                  enum:
                    - dots_balance
                    - ach
                  description: "The funding source for the payable. \n\n If `dots_balance` is specified, uses the app's Dots wallet balance to pay the payable. \n\n If `ach` is specified, uses a bank transfer from the app's linked bank account to pay the payable. \n\n If not specified, defaults to `ach`."
                file:
                  type: string
                  format: base64
                  description: Base64 encoded pdf file to attach to payable.
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        minLength: 1
                      unit_price:
                        type: number
                        minimum: 1
                        description: Item unit price in cents.
                      quantity:
                        type: number
                        minimum: 1
                      amount:
                        type: number
                        minimum: 1
                        description: Total line item amount in cents. This should be the unit price multiplied by the quantity.
                      description:
                        type: string
                    required:
                      - name
                      - unit_price
                      - quantity
                      - amount
              required:
                - acting_user_id
                - number
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/upload-from-file":
    post:
      summary: Create a payable from a file
      description: Create a payable from a file. The contents of the file will be processed and the payable will be created.
      operationId: create-payable-from-file
      tags:
        - accounts-payable
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                file:
                  type: string
                  format: binary
                  description: PDF file to be uploaded
              required:
                - acting_user_id
                - file
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the payable.
    get:
      summary: Get payable details
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
      operationId: get-payable
      description: Get details of a payable
    patch:
      summary: Update a payable
      description: Update a payable that has not been submitted for approval. To upload/delete the file, use the `/file` endpoint.
      operationId: update-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                number:
                  type: string
                description:
                  type: string
                ap_vendor_id:
                  type: string
                  format: uuid
                ap_payment_method_id:
                  type: string
                  format: uuid
                amount:
                  type: number
                  minimum: 1
                  description: Total payable amount in cents.
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        minLength: 1
                      unit_price:
                        type: number
                        minimum: 1
                        description: Item unit price in cents.
                      quantity:
                        type: number
                        minimum: 1
                      amount:
                        type: number
                        minimum: 1
                        description: Total line item amount in cents. This should be the unit price multiplied by the quantity.
                      description:
                        type: string
                    required:
                      - name
                      - unit_price
                      - quantity
                      - amount
      responses:
        "200":
          description: Updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}/file":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable
    post:
      summary: Upload file to the payable    
      description: Upload a file to be attached to the payable
      operationId: upload-payable-file
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: base64
              required:
                - file
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID of the payable that was updated with the file.
                  updated:
                    type: boolean
                    description: "`true` if the payable was updated."
                  object:
                    type: string
                    description: Type of the object that was updated.
    delete:
      summary: Delete file from the payable    
      description: Delete a file from the payable
      operationId: delete-payable-file
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID of the payable that has the file deleted.
                  deleted:
                    type: boolean
                    description: "`true` if the file was deleted."
                  object:
                    type: string
                    description: Type of the object that was deleted.

  "/v2/accounts-payable/payables/{payable_id}/cancel":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable
    post:
      summary: Cancel a payable
      description: Cancel a payable that has not been submitted for approval
      operationId: cancel-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                comment:
                  type: string
              required:
                - acting_user_id
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}/submit-for-approval":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable    
    post:
      summary: Submit a payable for approval
      description: Submit a payable for approval
      operationId: submit-payable-for-approval
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                comment:
                  type: string
              required:
                - acting_user_id
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}/approve":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable
    post:
      summary: Approve a payable
      description: Approve a payable
      operationId: approve-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                comment:
                  type: string
              required:
                - acting_user_id
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}/reject":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable
    post:
      summary: Reject a payable
      description: Reject a payable
      operationId: reject-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
                comment:
                  type: string
              required:
                - acting_user_id
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  "/v2/accounts-payable/payables/{payable_id}/pay":
    parameters:
      - schema:
          type: string
        name: payable_id
        in: path
        required: true
        description: The ID of the Payable
    post:
      summary: Pay a payable
      description: Pay a payable that has been approved.
      operationId: pay-payable
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                acting_user_id:
                  type: integer
                  description: The ID of the user performing this action. This will be displayed in the developer dashboard.
              required:
                - acting_user_id
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payable"
  /v2/accounts-payable/approval-policies:
    get:
      summary: List all approval policies
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/approval-policy"
      operationId: get-approval-policies
      description: List all approval policies
    post:
      summary: Create an approval policy
      description: Create an approval policy that will apply approval steps to payables in your app. It will only apply to policies that match the `approval_conditions` and are in state `submitted_for_approval`. Policies that already have approval steps will not be overwritten.
      operationId: create-approval-policy
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                payable_conditions:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - amount
                          - vendor_id
                    oneOf:
                      - if:
                          properties:
                            type:
                              const: amount
                        then:
                          properties:
                            value:
                              type: number
                              description: Value for amount condition
                            comparator:
                              type: string
                              enum:
                                - '<='
                                - '=='
                                - '>='
                          required:
                            - value
                            - comparator
                      - if:
                          properties:
                            type:
                              const: vendor_id
                        then:
                          properties:
                            value:
                              type: string
                              description: Value for vendor_id condition
                          required:
                            - value
                    required:
                      - type
                      - value
                  minItems: 1
                  uniqueItems: true
                approval_conditions:
                  type: array
                  items:
                    type: object
                    properties:
                      approver_list:
                        type: array
                        items:
                          type: number
                        minItems: 1
                        uniqueItems: true
                      num_approvals_required:
                        type: number
                        minimum: 1
                    required:
                      - approver_list
                      - num_approvals_required
                  minItems: 1
                  uniqueItems: true
              required:
                - payable_conditions
                - approval_conditions
                
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/approval-policy"
  "/v2/accounts-payable/approval-policies/{approval_policy_id}":
    parameters:
      - schema:
          type: string
        name: approval_policy_id
        in: path
        required: true
        description: The ID of the Approval Policy
    patch:
      summary: Update priority of an approval policy
      description: Update the priority of an approval policy by its ID
      operationId: update-approval-policy-priority
      tags:
        - accounts-payable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                priority:
                  type: integer
                  description: The priority of the approval policy.
              required:
                - priority
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/approval-policy"
    delete:
      summary: Delete an approval policy
      description: Delete an approval policy by its ID
      operationId: delete-approval-policy
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    type: boolean
                    description: "`true` if the approval policy was deleted."
                  id:
                    type: string
                    description: ID of the approval policy that was deleted.
                  object:
                    type: string
                    description: Type of the object that was deleted.
  /v2/accounts-payable/approvers:
    get:
      summary: List all approvers for api app
      tags:
        - accounts-payable
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/approver"
      operationId: get-approvers
      description: List all approvers for api app
  /v2/apps:
    get:
      summary: List all Apps
      description: List all apps created by your organization
      operationId: list-apps
      tags:
        - apps
      parameters:
        - name: limit
          schema:
            type: integer
            minimum: 0
            maximum: 100
          in: query
          required: false
          description: Maximum number of results to retrieve
        - name: starting_after
          schema:
            type: string
            format: UUID
          in: query
          required: false
          description: ID of first app to retrieve
        - name: ending_before
          schema:
            type: string
            format: UUID
          in: query
          required: false
          description: ID of last app to retrieve
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/app"
    post:
      summary: Create an App
      description: Create an app in your organization
      operationId: create-app
      tags:
        - apps
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  description: The name of the application.
                  minLength: 3
                  maxLength: 60
                metadata:
                  type:
                    - object
                    - string
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/app"
  "/v2/apps/{app_id}":
    parameters:
      - schema:
          type: string
          format: UUID
        name: app_id
        in: path
        required: true
        description: ID of the app to retrieve
    get:
      summary: Retrieve an App
      description: Retrieve an app in your organization by its ID
      operationId: get-app
      tags:
        - apps
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/app"
        "404":
          description: Not found
  "/v2/apps/{app_id}/compliance":
    parameters:
      - schema:
          type: string
          format: UUID
        name: app_id
        in: path
        required: true
        description: ID of the app to query or modify
    get:
      summary: Retrieve an App's Compliance Information
      description: Retrieve the compliance information for an app in your organization
      operationId: get-app-compliance
      tags:
        - apps
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/business-compliance-info"
        "404":
          description: Not found
    put:
      summary: Update an App's Compliance Information
      description: Add or update compliance information for an app in your organization
      operationId: put-app-compliance
      tags:
        - apps
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/business-compliance-info"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/business-compliance-info"
        "404":
          description: Not found
  "/v2/apps/{app_id}/ach-account":
    parameters:
      - schema:
          type: string
        name: app_id
        in: path
        required: true
        description: The ID of the app.
    get:
      summary: Get App ACH Account
      operationId: get-app-ach-account
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  mask:
                    type: string
                    description: The last four digits of the bank account number.
                  name:
                    type: string
                    description: The name of the bank account.
      tags:
        - apps
      description: Get the App's ach account information.
    put:
      summary: Add App ACH Account
      operationId: add-app-ach-account
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  mask:
                    type: string
                    description: The last four digits of the bank account number.
                  name:
                    type: string
                    description: The name of the bank account.
      description: Add an ACH account to an app. The account's owner must match the compliance information submitted.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                account_number:
                  type: string
                  pattern: "[0-9]{7,20}"
                  description: The bank account number.
                routing_number:
                  type: string
                  pattern: "[0-9]{9}"
                  description: The bank's ABA routing number.
                account_type:
                  enum:
                    - checking
                    - savings
                  description: The type of bank account.
              required:
                - account_number
                - routing_number
                - account_type
      tags:
        - apps
  "/v2/apps/{app_id}/deposit":
    parameters:
      - schema:
          type: string
        name: app_id
        in: path
        required: true
        description: The ID of the App.
    post:
      summary: Deposit Funds into App Wallet
      operationId: post-app-deposit
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
      tags:
        - apps
      description: Deposit funds into App wallet by endpoint.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount to deposit in cents.
                idempotency_key:
                  type: string
                  format: uuid
                  description: Idempotency key in UUID format.
              required:
                - amount
  "/v2/apps/{app_id}/withdraw":
    parameters:
      - schema:
          type: string
        name: app_id
        in: path
        required: true
        description: The ID of the App.
    post:
      summary: Withdraw Funds From App Wallet
      operationId: post-app-withdraw
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
      tags:
        - apps
      description: Withdraw funds from app wallet into app bank account.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount to deposit in cents.
                idempotency_key:
                  type: string
                  format: uuid
                  description: Idempotency key in UUID format.
              required:
                - amount
  "/v2/apps/{app_id}/compliance-flow":
    parameters:
      - schema:
          type: string
        name: app_id
        in: path
        required: true
        description: The ID of the App.
    post:
      summary: Refresh compliance flow
      operationId: post-app-compliance-flow
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
      tags:
        - apps
      description: Refresh the app's KYB compliance flow. Returns a URL
        that can be shared or embedded to allow the app's owners to
        submit mandatory onboarding information about their business.

        The flow URL will expire after 72 hours. Refreshing the flow
        will also expire the old URL.
  "/v2/apps/{app_id}/change_settings":
    parameters:
      - schema:
          type: string
          format: UUID
        name: app_id
        in: path
        required: true
        description: ID of the app to update.
    post:
      summary: Update an application's settings
      operationId: post-app-change-settings
      tags:
        - apps
      description: Update an application's payout and refill settings.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                payout_options_exclude_list:
                  type: array
                  items:
                    type: string
                  description: List of payout options to exclude
                auto_refill_active:
                  type: boolean
                  description: Enable or disable auto refill
                refill_amount:
                  type: integer
                  minimum: 1000
                  maximum: 1000000
                  description: Amount to refill when the threshold is reached
                refill_threshold:
                  type: integer
                  minimum: 1000
                  maximum: 1000000
                  description: Threshold for triggering a refill
      responses:
        "200":
          description: Successfully updated settings
          content:
            application/json:
              schema:
                type: object
                properties:
                  payout_options_exclude_list:
                    type: array
                    items:
                      type: string
                  auto_refill_active:
                    type: boolean
                  refill_amount:
                    type: integer
                  refill_threshold:
                    type: integer 
  /v2/payment-methods:
    get:
      summary: List all Payment Methods for a Payment Customer
      tags:
        - payment-methods
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    description: List of payment methods.
                    items:
                      $ref: "#/components/schemas/payment-method"
                  has_more:
                    type: boolean
      operationId: get-payment-methods
      description: Get the payment methods for a payment customer
      parameters:
        - schema:
            type: string
          in: query
          name: customer_id
          description: Payment Customer ID
        - schema:
            type: number
          in: query
          name: limit
          description: Number or payment methods to return
    parameters: []
  "/v2/payment-methods/{payment_method_id}":
    parameters:
      - schema:
          type: string
        name: payment_method_id
        in: path
        required: true
        description: ID of the payment method to get
    get:
      summary: Retrieve a Payment Method
      tags:
        - payment-methods
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-method"
      operationId: get-payment-method
      description: Get a payment method by its ID.
  "/v2/payment-methods/{payment_method_id}/attach":
    parameters:
      - schema:
          type: string
        name: payment_method_id
        in: path
        required: true
        description: The ID of the payment method.
    post:
      summary: Attach a Payment Method to a Payment Customer
      operationId: attach-payment-method
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-method"
      tags:
        - payment-methods
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                customer_id:
                  type: string
                  description: ID of the payment customer
              required:
                - customer_id
      description: Attach a payment method to a payment customer for future usage.
  "/v2/payment-methods/{payment_method_id}/detach":
    parameters:
      - schema:
          type: string
        name: payment_method_id
        in: path
        required: true
        description: ID of the payment method.
    post:
      summary: Detach Payment Method from a Payment Customer
      operationId: detach-payment-method
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/payment-method"
      tags:
        - payment-methods
      description: Detach a payment method from a payment customer
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                customer_id:
                  type: string
                  description: ID of the payment customer to detach the payment method from.
  /v2/disputes:
    get:
      summary: List all Disputes
      tags:
        - disputes
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/dispute"
      operationId: list-disputes
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all disputes
  "/v2/disputes/{dispute_id}":
    parameters:
      - schema:
          type: string
        name: dispute_id
        in: path
        required: true
        description: ID of the dispute to retrieve
    get:
      summary: Retrieve a Dispute
      tags:
        - disputes
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dispute"
      operationId: get-dispute
      description: Retreieve a dispute by its ID
  "/v2/disputes/{dispute_id}/evidence":
    parameters:
      - schema:
          type: string
        name: dispute_id
        in: path
        required: true
        description: ID of the dispute to add evidence to
    post:
      summary: Add Evidence to a Dispute
      operationId: post-dispute-evidence
      responses:
        "201":
          description: Created
          content: {}
      tags:
        - disputes
      description: Add an evidence file to the dispute
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                type:
                  enum:
                    - customer_communications
                    - refund_policy
                    - cancellation_policy
                    - customer_signature
                    - receipt
                    - service_documentation
                    - duplicate_charge_documentation
                    - shipping_documentation
                    - uncategorized
                content:
                  type: string
        description: ""
  "/v2/disputes/{dispute_id}/submit":
    parameters:
      - schema:
          type: string
        name: dispute_id
        in: path
        required: true
        description: ID of the dispute to submit
    post:
      summary: Submit a Dispute
      operationId: post-dispute-submit
      responses:
        "200":
          description: OK
      tags:
        - disputes
      description: Submit a dispute
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
              required:
                - description
  /v2/refunds:
    get:
      summary: List all Refunds
      tags:
        - refunds
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/refund"
      operationId: list-refunds
      parameters:
        - schema:
            type: string
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
      description: List all refunds
    post:
      summary: Create a Refund
      operationId: create-refund
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/refund"
                description: The `refund` object.
      description: Create a Refund
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  exclusiveMinimum: 0
                  description: Amount in cents
                payment_intent_id:
                  type: string
                  format: uuid
                  description: ID of the `payment_intent` you are refunding.
                reason:
                  type: string
                  enum:
                    - duplicate
                    - fraudulent
                    - requested_by_customer
                    - expired_uncaptured_charge
                    - partial_capture
                metadata:
                  type: boolean
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
              required:
                - amount
                - payment_intent_id
      tags:
        - refunds
  "/v2/refunds/{refund_id}":
    parameters:
      - schema:
          type: string
        name: refund_id
        in: path
        required: true
        description: ID of the refund to retrieve
    get:
      summary: Retrieve a Refund
      tags:
        - refunds
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/refund"
      operationId: get-refund
      description: Retreieve a refund by its ID
  /v2/organization-transfers:
    get:
      summary: List all Organization Transfers
      tags:
        - transfers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_more:
                    type: boolean
                    description: "`true` if there are more `transfers`."
                  data:
                    type: array
                    description: Array of `transfers`.
                    items:
                      $ref: "#/components/schemas/transfer"
      operationId: list-organization-transfers
      parameters:
        - schema:
            type: integer
          in: query
          name: limit
          description: "A limit on the number of objects to be returned, between 1 and 100."
        - schema:
            type: string
            format: uuid
          in: query
          name: starting_after
          description: "A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `starting_after`=`aaa` in order to fetch the next page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: ending_before
          description: "A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `aaa`, your subsequent call can include `ending_before`=`aaa` in order to fetch the previous page of the list."
        - schema:
            type: string
            format: uuid
          in: query
          name: user_id
          description: Include only results with this user ID attached.
      description: List all transfers to and from an Organization's wallet.
    post:
      summary: Create an Organization Transfer
      operationId: create-organization-transfer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: integer
                  description: The amount in cents to transfer. Negative amount transfers money from the `organization` to the `api_app`.
                api_app_id:
                  type: string
                  format: uuid
                  description: API App ID to transact with.
                idempotency_key:
                  type: string
                  format: uuid
                metadata:
                  type:
                    - string
                    - object
                    - "null"
                  description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
              required:
                - amount
                - api_app_id
            examples:
              Send Funds to App:
                value:
                  amount: -1000
                  api_app_id: a169451c-8525-4352-b8ca-070dd449a1a5
              Debit Funds from App:
                value:
                  amount: -1000
                  api_app_id: a169451c-8525-4352-b8ca-070dd449a1a5
        description: ""
      description: Create a transfer for the organization's wallet to an api app.
      tags:
        - transfers
  "/v2/organization-transfers/{transfer_id}":
    parameters:
      - schema:
          type: string
        name: transfer_id
        in: path
        required: true
        description: ID of the transfer to retrieve
    get:
      summary: Get an Organization Transfer
      tags:
        - transfers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/transfer"
                description: The `transfer` object.
      operationId: get-organization-transfer
      description: Get an organization transfer by its id.
  "/v2/users/{user_id}/addresses":
    parameters:
      - schema:
          type: string
        name: user_id
        in: path
        required: true
        description: "The ID of the user"
    put:
      summary: Add User Address
      description: Add an address to the user
      tags:
        - users
      responses:
        "200":
          description: OK
      operationId: add-user-address
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - postcode
                - city
                - state
                - country
                - line_1
              properties:
                postcode:
                  type: string
                city:
                  type: string
                state:
                  type: string
                  description: 2 letter state code for US states
                country:
                  type: string
                  description: 2 letter country code
                line_1:
                  type: string
                line_2:
                  type: string
                line_3:
                  type: string
  /v2/organizations:
    get:
      summary: Retrieve Organization Details
      tags:
        - organizations
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: The organization's unique identifier.
                  balance:
                    type: integer
                    description: The organization's current balance in cents.
                description: The organization object.
      operationId: get-organization
      description: Get details about the authenticated organization, including its current balance.
  "/v2/organizations/copy-compliance-information-between-apps":
      put:
        summary: Copy compliance information between applications
        tags:
          - organizations
        requestBody:
          required: true
          content:
            application/json:
              schema:
                type: object
                required:
                  - source_app_id
                  - destination_app_id
                properties:
                  source_app_id:
                    type: string
                    format: uuid
                    description: UUID of the source application
                  destination_app_id:
                    type: string
                    format: uuid
                    description: UUID of the destination application
        responses:
          "200":
            description: OK
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                    message:
                      type: string
                      example: "Business compliance information successfully copied"
          "400":
            description: Invalid request
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      example: false
                    message:
                      type: string
          "403":
            description: Resource not found or unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                    message:
                      type: string
  "/v2/organizations/copy-organization-compliance-to-app/{api_app_id}":
      put:
        summary: Copy organization compliance information to an application
        tags:
          - organizations
        parameters:
          - name: api_app_id
            in: path
            required: true
            schema:
              type: string
              format: uuid
            description: UUID of the destination application
        responses:
          "200":
            description: Compliance information successfully copied
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      example: true
                    message:
                      type: string
                      example: "Business compliance information successfully copied"
          "400":
            description: Invalid request
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      example: false
                    message:
                      type: string
          "403":
            description: Resource not found or unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      example: false
                    message:
                      type: string
components:
  schemas:
    rail:
      type: string
      enum:
        - ach
        - paypal
        - venmo
        - cash_app
        - intl_bank
        - airtm
        - payoneer
    flow:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the `flow`.
        created:
          type: string
          format: date-time
          description: Date that the `flow` was created.
        user_id:
          type:
            - string
            - "null"
          format: uuid
          description: ID of the `user` that has claimed the `flow`.
        steps:
          type: array
          description: Array of steps in the flow.
          items:
            type: string
            enum:
              - compliance
              - id-verification
              - background-check
              - manage-payments
              - manage-payouts
              - payout
              - redirect
        completed_steps:
          type: array
          description: Array of steps that have been completed in the flow.
          items:
            type: string
            enum:
              - compliance
              - id-verification
              - background-check
              - manage-payments
              - manage-payouts
              - payout
              - redirect
        link:
          type: string
          format: uri
          description: URL to access the `flow`. Can be embedded in an `iframe`.
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
    payment-method:
      type: object
      properties:
        id:
          type: string
          description: ID of the `payment-method`.
        platform:
          enum:
            - ach
            - paypal
            - venmo
            - cash_app
            - intl_transfer
            - airtm
            - payoneer
          type: string
        description:
          type: string
        mask:
          type: string
        email:
          type: string
        phone_number:
          type: string
        cash_tag:
          type: string
        country:
          type: string
          format: iso3166
        currency:
          type: string
          format: iso4217
        rtp_enabled:
          type: boolean
          description: Indicates if RTP is enabled for the payment method (applies to ach only).
        meta:
          description: Optional metadata for the payout method. Can be any valid JSON value (object, string, number, boolean, array, or null).
      required:
        - platform
    payout-link:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the `payout-link`.
        created:
          type: string
          format: date-time
          description: Date the `payout-link` was created.
        link:
          type: string
          format: uri
          description: URL to access the `payout-link`.
        amount:
          type: number
          description: The amount to pay in cents.
        status:
          type: string
          enum:
            - created
            - delivery_pending
            - delivery_failed
            - sent
            - delivered
            - claimed
            - reversed
            - canceled
            - expired
            - failed
          description: Status of the `payout-link`.
        payee:
          type: object
          description: Information about the payee. It is used to pre-fill information.
          properties:
            first_name:
              type: string
              description: Payee's first name.
            last_name:
              type: string
              description: Payee's last name.
            email:
              type: string
              format: email
              description: Payee's email address.
            country_code:
              type: string
              description: Country code of the payee's phone number e.g. "1" for USA.
            phone_number:
              type: string
              description: Rest of the payee's phone number.
        delivery:
          type: object
          properties:
            method:
              type: string
              enum:
                - link
                - sms
                - email
            email:
              type: string
              format: email
            country_code:
              type: string
            phone_number:
              type: string
        tax_exempt:
          type: boolean
          description: Transfers marked as `tax_exempt` will not be counted towards the 1099 threshold.
        claimed_user_id:
          type: string
          format: uuid
          description: ID of the `user` that has claimed the `payout-link`.
        flow_id:
          type: string
          format: uuid
          description: ID of the payout flow UI that is sent to the user.
        transfer_id:
          type: string
          format: uuid
          description: ID of the `transfer` created for this `payout-link`. 
        memo:
          type:
           - string
           - "null"
          description: Optional memo added to this `payout-link`
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
    payout-request:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the `payout-request`.
        created:
          type: string
          format: date-time
          description: Date that the `payout-request` was created.
        amount:
          type: number
          description: Amount in cents of the `payout-request`.
        status:
          type: string
          enum:
            - created
            - approved
            - rejected
          description: Status of the `payout-request`.
        payee:
          type: object
          properties:
            country_code:
              type: string
            phone_number:
              type: string
        payout-link:
          $ref: "#/components/schemas/payout-link"
          description: "The `payout-link` that was sent when the `payout-request` was approved. "
        user:
          $ref: "#/components/schemas/user"
          description: The `user` that requested the payout.
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
        memo:
          type:
            - string
    transaction:
      type: object
      properties:
        id:
          type: integer
        amount:
          type: number
        created:
          type: string
          format: date-time
        source_name:
          type: string
        destination_name:
          type: string
        type:
          type: string
          enum:
            - balance
            - refill
            - payout
            - payment
            - fee
            - surrogate
          description: The general category of the transaction
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
        transfer_id:
          type: string
          format: uuid
          description: ID of the `transfer` that the transaction belongs to.
        transfer:
          $ref: "#/components/schemas/transfer"
          description: The `transfer` that the transaction belongs to. This is only present if `include_transfer` is true.
    transfer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        created:
          type: string
          format: date-time
        user_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
            - created
            - pending
            - failed
            - completed
            - reversed
            - canceled
            - flagged
        type:
          type: string
          enum:
            - refill
            - payout
            - balance
            - payment
            - settlement
            - payable
          description: |
            The type of this transfer.
             * `refill` - refill of an API App or Organization's Dots Wallet
             * `payout` - payout to a User
             * `balance` - balance transfer between Dots Wallets, such as from an API App to a User's Dots Wallet
             * `payment` - payment from a User to an API App
             * `settlement` - legacy, currently unused
             * `payable` - payable for Accounts Payable 
        amount:
          type: number
        external_data:
          type: object
          properties:
            account_id:
              type: string
            external_id:
              type: string
            platform:
              type: string
              enum:
                - ach
                - paypal
                - venmo
                - visa
                - amazon
                - cash_app
                - intl_bank
                - intl_transfer
                - bank_transfer
        transactions:
          type: array
          items:
            $ref: "#/components/schemas/transaction"
        payout_link_id:
          type: string
          format: uuid
          description: ID of the `payout-link` that the transfer belongs to.
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
    user:
      type: object
      properties:
        id:
          type: string
          format: uuid
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: object
          properties:
            country_code:
              type: string
            phone_number:
              type: string
        default_payout_method:
          $ref: "#/components/schemas/rail"
        default_payout_method_details:
          $ref: "#/components/schemas/payment-method"
        wallet:
          $ref: "#/components/schemas/wallet"
        status:
          type: string
          enum:
            - verified
            - unverified
            - disabled
            - in_review
        compliance:
          type: object
          properties:
            tax_id_collected:
              type: boolean
              description: Deprecated. Use `w9.tax_id_collected` instead.
              depcrecated: true
            tax_id_verification:
              type: string
              enum:
                - unsubmitted
                - pending
                - matched
                - mismatched
              description: Tax ID verification status. A mismatched tax
                ID may be corrected and resubmitted.
            address_collected:
              type: boolean
              description: Deprecated. Use `w9.address_collected` instead.
              deprecated: true
            date_of_birth_collected:
              type: boolean
              description: The user's date of birth was collected.
            must_collect_1099:
              type: boolean
              description: The user's 1099 information needs to be collected to resume payouts.
            1099_collected:
              type: boolean
              description: The user's 1099 information was collected.
            w8_ben_collected:
              type: boolean
              description: The user's W8-BEN information was collected.
            flagged:
              type: boolean
              description: The user is flagged for review. For more information, see the `flags` object.
            id_verified:
              type: boolean
              description: The user's id was verified.
            has_criminal_activity:
              type: boolean
              description: The user has criminal activity based on a background check.
            w9:
              type:
                - object
                - null
              description: Information about the user's W9 form. null if the user is not a US individual or business.
              properties:
                entity_type:
                  type: string
                  enum:
                    - individual
                    - business
                business_name:
                  type:
                    - string
                    - null
                tax_id_collected:
                  type: boolean
                address_collected:
                  type: boolean
            flags:
              type: object
              properties:
                ofac:
                  type: boolean
                  description: True when the user is flagged for potential OFAC compliance issues.
                ofac_status:
                  type: string
                  enum:
                    - unflagged
                    - id_verification_required
                    - in_review
                    - flagged
                  description: Status of the user's OFAC compliance verification.
                payout_method:
                  type: boolean
                  description: True when two or more users share the same payout method.
                payout_method_cycle:
                  type: boolean
                  description: True when the user has connected or disconnected payout methods repeatedly over a short period of time.
        metadata:
          type:
            - string
            - object
            - "null"
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
    wallet:
      type: object
      properties:
        amount:
          type: integer
        withdrawable_amount:
          type: integer
        credit_balance:
          type: integer
    payment-intent:
      title: payment-intent
      type: object
      properties:
        id:
          type: string
          format: uuid
        amount:
          type: integer
          minimum: 0
          description: Amount in cents
        currency:
          type: string
          enum:
            - usd
        user_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
            - initialized
            - created
            - requires_payment_method
            - requires_confirmation
            - requires_action
            - processing
            - succeeded
            - requires_capture
            - canceled
            - failed
        transfer_id:
          format: uuid
          type: string
        payment_method_id:
          type: string
          format: uuid
        metadata:
          type:
            - object
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
        client_secret:
          type: string
          description: Only availble on payment intent creation.
      required:
        - id
        - amount
        - currency
    transfer-batch-item:
      title: transfer-batch-item
      type: object
      properties:
        transfer_id:
          type: string
          format: uuid
        amount:
          type: integer
        user_id:
          type: string
          format: uuid
        tax_exempt:
          type: boolean
        allow_debit:
          type: boolean
        metadata:
          type: object
        error:
          type: string
    payment-customer:
      title: payment-customer
      type: object
      properties:
        id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        country_code:
          type: string
        phone_number:
          type: string
        first_name:
          type: string
        middle_name:
          type: string
        last_name:
          type: string
        business_name:
          type: string
        address:
          type: object
          properties:
            country:
              type: string
            city:
              type: string
            state:
              type: string
            postcode:
              type: string
            line_1:
              type: string
            line_2:
              type: string
          required:
            - country
            - city
            - state
            - postcode
            - line_1
        metadata:
          type: object
        created:
          type: string
          format: date-time
        updated:
          type: string
          format: date-time
    checkout-session:
      title: checkout-session
      type: object
      properties:
        id:
          type: string
          format: uuid
        status:
          type: string
          enum:
            - open
            - complete
            - expired
        payment_intent_id:
          type: string
          format: uuid
        success_url:
          type: string
          format: uri
        cancel_url:
          type: string
          format: uri
        checkout_session_url:
          type: string
          format: uri
        client_reference_id:
          type: string
        expiry:
          type: string
          format: date-time
        metadata:
          type: object
        line_items:
          type: array
          items:
            type: object
            properties:
              quantity:
                type: integer
              price_id:
                type: string
        created:
          type: string
          format: date-time
        updated:
          type: string
          format: date-time
        customer_id:
          type: string
          format: uuid
          description: "`payment-customer` ID"
        customer_email:
          type: string
          format: email
        amount_total:
          type: integer
    vendor:
      type: object
      properties:
        id:
          type: string
          description: ID of the `vendor`.
        name:
          type: string
          description: Name of the `vendor`.
        description:
          type: string
        active:
          type: boolean
          description: Indicates if the vendor is active.
        address:
          type: object
          properties:
            city:
              type: string
            country:
              type: string
            line_1:
              type: string
            line_2:
              type: string
            postcode:
              type: string
            state:
              type: string
        api_app_id:
          type: string
          format: uuid
        contact_email:
          type: string
          format: email
        created:
          type: string
          format: date-time
        external_id:
          type: string
          nullable: true
    vendor-payment-method:
      type: object
      properties:
        name:
          type: string
        ach_account_number:
          type: string
        ach_routing_number:
          type: string
        ach_account_type:
          type: string
          enum:
            - checking
            - savings
    payable:
      type: object
      properties:
        action_history:
          type: array
          items:
            type: object
            properties:
              action:
                type: string
                enum:
                  - create
                  - cancel
                  - submit_for_approval
                  - approve
                  - reject
                  - initiate_payment
                  - retry_payment
              comment:
                type: string
                nullable: true
              timestamp:
                type: string
                format: date-time
              user_id:
                type: integer
              user_name:
                type: string
              user_role:
                type: string
                enum:
                  - admin
                  - viewer
                  - payer
                  - ap_approver
                  - ap_creator
        amount:
          type: number
          description: Total payable amount in cents.
        funding_source:
          type: string
          enum:
            - dots_balance
            - ach
        ap_payment_method_id:
          type: string
          format: uuid
        ap_payment_method_name:
          type: string
        ap_vendor_id:
          type: string
          format: uuid
        ap_vendor_name:
          type: string
        api_app_id:
          type: string
          format: uuid
        approval_steps:
          type: array
          items:
            type: object
            properties:
              completed:
                type: boolean
              completed_timestamp:
                type: string
                format: date-time
              num_approvals_required:
                type: integer
              user_approvals:
                type: array
                items:
                  type: object
                  properties:
                    approval_comment:
                      type: string
                      nullable: true
                    approval_given:
                      type: boolean
                    approval_timestamp:
                      type: string
                      format: date-time
                    name:
                      type: string
                    user_id:
                      type: integer
        created:
          type: string
          format: date-time
        currency:
          type: string
        description:
          type: string
          nullable: true
        external_id:
          type: string
          nullable: true
        file_url:
          type: string
          format: uri
          nullable: true
        id:
          type: string
          format: uuid
        items:
          type: array
          items:
            type: object
            properties:
              amount:
                type: number
                description: Total line item amount in cents. This should be the unit price multiplied by the quantity.
                minimum: 1
              description:
                type: string
              name:
                type: string
                minLength: 1
              quantity:
                type: number
                minimum: 1
              unit_price:
                type: number
                description: Item unit price in cents.
                minimum: 1
        number:
          type: string
        status:
          type: string
        status_history:
          type: array
          items:
            type: object
            properties:
              status:
                type: string
                enum:
                  - created
                  - canceled
                  - submitted_for_approval
                  - rejected
                  - approved
                  - payment_initiated
                  - payment_failed
                  - payment_completed
              timestamp:
                type: string
                format: date-time
        transfer_history:
          type: array
          items:
            type: object
            properties:
              created_timestamp:
                type: string
                format: date-time
              idempotency_key:
                type: string
                format: uuid
              transfer_id:
                type: string
                format: uuid
        transfer_id:
          type: string
          format: uuid
        updated:
          type: string
          format: date-time
    approval-policy:
      type: object
      properties:
        active:
          type: boolean
        api_app_id:
          type: string
          format: uuid
        approval_conditions:
          type: array
          items:
            type: object
            properties:
              approver_list:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
              num_approvals_required:
                type: integer
        payable_conditions:
          type: array
          items:
            type: object
            properties:
              comparator:
                type: string
              type:
                type:
                  enum:
                    - amount
                    - vendor_id
              value:
                type: number
        created:
          type: string
          format: date-time
        description:
          type: string
          nullable: true
        id:
          type: string
          format: uuid
        priority:
          type: integer
    approver:
      type: object
      properties:
        email:
          type: string
          format: email
        first_name:
          type: string
        id:
          type: integer
        last_name:
          type: string
        phone_number:
          type: string
        role:
          type: string
          enum:
            - admin
            - viewer
            - payer
            - ap_approver
            - ap_creator
        scope:
          type: string
          enum:
            - organization
            - app
        username:
          type: string
    app:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        status:
          type: string
          enum:
            - created
            - in_review
            - approved
          description: App verification status. Some Dots use cases require newly created apps to pass KYB review.
        metrics:
          type: object
          properties:
            wallet_balance:
              type: string
              format: decimal
            money_out:
              type: string
              format: decimal
            connected_users:
              type: integer
              min: 0
          required:
            - wallet_balance
            - money_out
            - connected_users
        metadata:
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
          type:
            - string
            - object
      required:
        - id
        - name
        - metrics
    business-compliance-info:
      type: object
      required:
        - company_info
        - contact_info
        - directors
        - flow_of_funds
      properties:
        company_info:
          type: object
          required:
            - name
            - website
            - ein
            - incorporation_type
            - incorporation_state
            - incorporation_date
            - ubo_count
          properties:
            dba:
              maxLength: 60
              minLength: 1
              type: string
              description: Company DBA (Doing Business As)
            ein:
              pattern: "[0-9]{9}"
              type: string
              description: Federal Employer Identification Number
            incorporation_date:
              format: date
              type: string
              description: Date of incorporation
            incorporation_state:
              type: string
              description: State where incorporated
            incorporation_type:
              enum:
                - sole_proprietorship
                - partnership
                - llc
                - c_corporation
                - s_corporation
              type: string
              description: The legal classification of the company's incorporation
            name:
              maxLength: 100
              minLength: 3
              type: string
              description: Company's legal name
            website:
              maxLength: 100
              minLength: 3
              type: string
              description: Company web address
            ubo_count:
              type: integer
              minimum: 1
              description: Number of Ultimate Benficial Owners (UBOs). This must be the same as the length of the `directors` array.
        contact_info:
          type: object
          required:
            - email
            - phone_number
            - line1
            - city
            - zip
            - state
            - country
          properties:
            city:
              maxLength: 100
              minLength: 1
              type: string
            country:
              maxLength: 60
              minLength: 2
              type: string
              description: Country name or country code
            email:
              format: email
              maxLength: 100
              minLength: 3
              type: string
              description: Primary contact email address. Service emails will be sent to this address.
            line1:
              maxLength: 100
              minLength: 1
              type: string
              description: Address line 1
            line2:
              maxLength: 100
              minLength: 1
              type: string
              description: Address line 2
            phone_number:
              maxLength: 30
              minLength: 3
              type: string
            state:
              maxLength: 60
              minLength: 2
              type: string
              description: State when applicable
            zip:
              maxLength: 20
              minLength: 3
              type: string
              description: ZIP or postal code
        directors:
          items:
            type: object
            required:
              - first_name
              - last_name
              - title
              - phone
              - email
              - dob
              - ownership_percentage
              - address
            properties:
              address:
                type: object
                required:
                  - line1
                  - city
                  - zip
                  - country
                  - state
                properties:
                  city:
                    maxLength: 100
                    minLength: 1
                    type: string
                  country:
                    maxLength: 60
                    minLength: 2
                    type: string
                  line1:
                    maxLength: 100
                    minLength: 1
                    type: string
                  line2:
                    maxLength: 100
                    minLength: 1
                    type: string
                  state:
                    maxLength: 60
                    minLength: 1
                    type: string
                  zip:
                    maxLength: 20
                    minLength: 3
                    type: string
              dob:
                format: date
                type: string
                description: Date of birth
              ssn:
                type: string
                pattern: "[0-9]{9}"
                description: Social security number
              email:
                format: email
                maxLength: 100
                minLength: 3
                type: string
                description: "Contact email, needs to be verifiable"
              first_name:
                maxLength: 60
                minLength: 1
                type: string
              last_name:
                maxLength: 60
                minLength: 1
                type: string
              ownership_percentage:
                max: 100
                min: 0
                type: number
                description: Percentage of company owned by this person
              phone:
                maxLength: 30
                minLength: 3
                type: string
              title:
                maxLength: 60
                minLength: 3
                type: string
                description: Employee title or ownership role
            if:
              properties:
                address:
                  properties:
                    country:
                      const: US
            then:
              required: [ssn]
          type: array
        flow_of_funds:
          type: object
          required:
            - reasons
            - usage
          properties:
            reasons:
              maxLength: 400
              minLength: 3
              type: string
              description: Flow of funds
              examples:
                - "Payments are processed via credit card, deposited to Dots, and paid to sellers."
                - Funds will be loaded from our bank account and paid out via Dots.
            usage:
              maxLength: 400
              minLength: 3
              type: string
              description: Description of the business
              examples:
                - We are a market place for teddy bears.
                - We provide a platform for influencers to get paid for posting.
    dispute:
      title: dispute
      type: object
      properties:
        id:
          type: string
          format: uuid
        payment_intent_id:
          type: string
          format: uuid
        status:
          enum:
            - needs_response
            - under_review
            - closed
            - warning_needs_response
            - warning_under_review
            - warning_closed
            - won
            - lost
        evidence:
          type: array
          items:
            $ref: "#/components/schemas/dispute-file"
    dispute-file:
      title: dispute-file
      type: object
      properties:
        type:
          enum:
            - customer_communications
            - refund_policy
            - cancellation_policy
            - customer_signature
            - receipt
            - service_documentation
            - duplicate_charge_documentation
            - shipping_documentation
            - uncategorized
        url:
          type: string
          format: uri
    refund:
      title: refund
      type: object
      properties:
        id:
          type: string
          format: uuid
    payout-create-request:
      title: payout-create-request
      type: object
      description: Base schema for creating a payout
      properties:
        user_id:
          type: string
          format: uuid
          description: ID of the `user` who you are creating the payout for.
        amount:
          type: integer
          exclusiveMinimum: 0
          description: Amount in cents to payout the user.
        platform:
          type: string
          enum:
            - paypal
            - venmo
            - ach
            - bank_transfer
            - cash_app
            - default
          description: "Platform that you are paying out the `user` through."
        account_id:
          type: string
          format: uuid
          description: The bank account ID you are paying to. Required for `ach` and `intl_bank`.
        fund:
          type: boolean
          description: Creates a transfer for the amount to the user before creating the payout. The funds are returned to the App Wallet if the payout does not succeed. Please ensure that you are handling transfer failure webhooks when using this option.
        tax_exempt:
          type: boolean
          description: Payouts marked as `tax_exempt` will not be counted towards the 1099 threshold. Can be `true` only if `fund` is `true`.
        idempotency_key:
          type: string
          format: uuid
          description: UUID that will be used to idempotently handle requests. Transfers with existing idempotency keys will be rejected.
        metadata:
          type:
            - string
            - object
          description: Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format.
        payout_fee_party:
          type: string
          enum:
            - user
            - platform
          description: Overrides the setting for which party will pay fees on this payout. This takes precedence over the default for your application.
      required:
        - user_id
        - amount
        - platform
    payout-batch-request-item:
      title: payout-batch-request-item
      type: object
      description: Individual payout item in a batch request
      allOf:
        - $ref: "#/components/schemas/payout-create-request"
        - required:
            - idempotency_key
            - fund
    payout-batch-results-item:
      title: payout-batch-results-item
      type: object
      description: Result for an individual item in a payout batch
      properties:
        user_id:
          type: string
          format: uuid
          description: ID of the user for this payout.
        idempotency_key:
          type: string
          format: uuid
          description: The idempotency key for this specific item.
        metadata:
          type:
            - string
            - object
          description: The metadata attached to this item.
        transfer:
          type: object
          description: Transfer information if the payout was successful.
          properties:
            id:
              type: string
              format: uuid
              description: ID of the transfer created for this batch item.
            status:
              type: string
              enum:
                - created
                - pending
                - failed
                - completed
                - reversed
                - canceled
                - flagged
              description: Current status of the transfer.
          required:
            - id
            - status
        error_code:
          type: string
          description: Error code if the payout failed.
        error_message:
          type: string
          description: Error message if the payout failed.
        request:
          $ref: "#/components/schemas/payout-batch-request-item"
          description: Original request for this item (only included when include_request=true).
      required:
        - user_id
        - idempotency_key
    payout-batch-response:
      title: payout-batch-response
      type: object
      description: Basic payout batch response
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the payout batch.
        created:
          type: string
          format: date-time
          description: Timestamp when the batch was created.
        idempotency_key:
          type: string
          format: uuid
          description: The idempotency key provided when creating the batch.
        status:
          type: string
          enum:
            - created
            - processing
            - paying_out
            - completed
          description: Current status of the batch processing.
        metadata:
          type:
            - string
            - object
          description: The metadata attached to the batch.
      required:
        - id
        - created
        - status
  securitySchemes:
    api_key:
      type: http
      scheme: basic
security:
  - api_key: []
